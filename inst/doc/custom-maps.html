<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Jack O. Wasey" />

<meta name="date" content="2020-05-30" />

<title>Quick custom comorbidity maps are helpful</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Quick custom comorbidity maps are helpful</h1>
<h4 class="author">Jack O. Wasey</h4>
<h4 class="date">2020-05-30</h4>



<p>Many problems with clinical data are best solved using the standard and widely validated comorbidities, mapped to subsets of ICD-9 or ICD-10 codes, as published by authors including Elixhauser, Quan, Deyo and the AHRQ. It is also common to have a pre-defined specific set of ICD codes. Examples of this include:</p>
<ul>
<li>Studying sub-types of a common comorbidity, such as obesity: although obesity is in the AHRQ and Elixhauser mappings, there is no granularity.</li>
<li>Studying a particular disease: most diseases are not in the standard comorbidity maps. To distinguish patients having or not having a particular set of diseases is usually not possible using the standard comorbidity maps. E.g. Which patients have eczema? Which emergency room patients presented with a sexual health problem?</li>
</ul>
<p><code>icd</code> has a simple mechanism to use custom category-ICD maps. A comorbidity map is a list of character vectors. Each list must be named to reflect the ICD codes it contains; the character vector contains the ICD codes themselves.</p>
<p>Let’s take a look at the first few items in the Charlson map from Quan and Deyo:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">print</span>(icd<span class="op">::</span>icd10_map_quan_deyo, <span class="dt">n_comorbidities =</span> <span class="dv">3</span>, <span class="dt">n_codes =</span> <span class="dv">8</span>)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co">#&gt; Showing first 3 comorbidities, and first 8 of each.</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">#&gt; $MI</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">#&gt; [1] &quot;I21&quot;   &quot;I210&quot;  &quot;I2101&quot; &quot;I2102&quot; &quot;I2109&quot; &quot;I211&quot;  &quot;I2111&quot; &quot;I2119&quot;</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#&gt; $CHF</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">#&gt; [1] &quot;I099&quot; &quot;I110&quot; &quot;I130&quot; &quot;I132&quot; &quot;I255&quot; &quot;I420&quot; &quot;I425&quot; &quot;I426&quot;</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co">#&gt; $PVD</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">#&gt; [1] &quot;I70&quot;    &quot;I700&quot;   &quot;I701&quot;   &quot;I702&quot;   &quot;I7020&quot;  &quot;I70201&quot; &quot;I70202&quot; &quot;I70203&quot;</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co">#&gt; ...</span></a></code></pre></div>
<div id="obesity-example" class="section level1">
<h1>Obesity example</h1>
<p>Now we can make our own comorbidity map, and apply it to <a href="https://stackoverflow.com/questions/53954537/creating-categorical-variable-in-r/53954950#53954950">a question on ‘Stackoverflow’</a>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">library</span>(icd)</a>
<a class="sourceLine" id="cb2-2" title="2">obesity_map &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;E663&quot;</span>,</a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="st">&quot;2&quot;</span> =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;E669&quot;</span>, <span class="st">&quot;E668&quot;</span>, <span class="st">&quot;E6609&quot;</span>),</a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;E661&quot;</span>,</a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;E662&quot;</span>)</a>
<a class="sourceLine" id="cb2-7" title="7"></a>
<a class="sourceLine" id="cb2-8" title="8">obesity &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb2-9" title="9">  <span class="dt">ICD.10.Code =</span> <span class="kw">c</span>(<span class="st">&quot;E6601&quot;</span>, <span class="st">&quot;E663&quot;</span>, <span class="st">&quot;E663&quot;</span>, <span class="st">&quot;E6609&quot;</span>),</a>
<a class="sourceLine" id="cb2-10" title="10">  <span class="dt">Encounter.ID =</span> <span class="kw">c</span>(<span class="st">&quot;408773&quot;</span>, <span class="st">&quot;542207&quot;</span>, <span class="st">&quot;358741&quot;</span>, <span class="st">&quot;342534&quot;</span>)</a>
<a class="sourceLine" id="cb2-11" title="11">)</a>
<a class="sourceLine" id="cb2-12" title="12"></a>
<a class="sourceLine" id="cb2-13" title="13">custom_map_result &lt;-<span class="st"> </span>icd<span class="op">::</span><span class="kw">icd10_comorbid</span>(</a>
<a class="sourceLine" id="cb2-14" title="14">  obesity,</a>
<a class="sourceLine" id="cb2-15" title="15">  <span class="dt">map =</span> obesity_map)</a>
<a class="sourceLine" id="cb2-16" title="16"></a>
<a class="sourceLine" id="cb2-17" title="17">custom_map_result</a>
<a class="sourceLine" id="cb2-18" title="18"><span class="co">#&gt;            1     2     3     4</span></a>
<a class="sourceLine" id="cb2-19" title="19"><span class="co">#&gt; 408773 FALSE FALSE FALSE FALSE</span></a>
<a class="sourceLine" id="cb2-20" title="20"><span class="co">#&gt; 542207  TRUE FALSE FALSE FALSE</span></a>
<a class="sourceLine" id="cb2-21" title="21"><span class="co">#&gt; 358741  TRUE FALSE FALSE FALSE</span></a>
<a class="sourceLine" id="cb2-22" title="22"><span class="co">#&gt; 342534 FALSE  TRUE FALSE FALSE</span></a>
<a class="sourceLine" id="cb2-23" title="23"></a>
<a class="sourceLine" id="cb2-24" title="24"><span class="co"># finally, format as requested by the user</span></a>
<a class="sourceLine" id="cb2-25" title="25"><span class="kw">apply</span>(custom_map_result, <span class="dv">1</span>, <span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb2-26" title="26">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">any</span>(x)) <span class="dv">4</span> <span class="cf">else</span> <span class="kw">which</span>(x)[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb2-27" title="27">  })</a>
<a class="sourceLine" id="cb2-28" title="28"><span class="co">#&gt; 408773 542207 358741 342534 </span></a>
<a class="sourceLine" id="cb2-29" title="29"><span class="co">#&gt;      4      1      1      2</span></a>
<a class="sourceLine" id="cb2-30" title="30"></a>
<a class="sourceLine" id="cb2-31" title="31"><span class="co"># see also:</span></a>
<a class="sourceLine" id="cb2-32" title="32">icd<span class="op">::</span>icd10_map_ahrq<span class="op">$</span>Obesity</a>
<a class="sourceLine" id="cb2-33" title="33"><span class="co">#&gt;  [1] &quot;E6601&quot;  &quot;E6609&quot;  &quot;E661&quot;   &quot;E662&quot;   &quot;E668&quot;   &quot;E669&quot;   &quot;O99210&quot; &quot;O99211&quot;</span></a>
<a class="sourceLine" id="cb2-34" title="34"><span class="co">#&gt;  [9] &quot;O99212&quot; &quot;O99213&quot; &quot;O99214&quot; &quot;O99215&quot; &quot;R939&quot;   &quot;Z6830&quot;  &quot;Z6831&quot;  &quot;Z6832&quot; </span></a>
<a class="sourceLine" id="cb2-35" title="35"><span class="co">#&gt; [17] &quot;Z6833&quot;  &quot;Z6834&quot;  &quot;Z6835&quot;  &quot;Z6836&quot;  &quot;Z6837&quot;  &quot;Z6838&quot;  &quot;Z6839&quot;  &quot;Z6841&quot; </span></a>
<a class="sourceLine" id="cb2-36" title="36"><span class="co">#&gt; [25] &quot;Z6842&quot;  &quot;Z6843&quot;  &quot;Z6844&quot;  &quot;Z6845&quot;  &quot;Z6854&quot;</span></a>
<a class="sourceLine" id="cb2-37" title="37">icd<span class="op">::</span>icd10_map_quan_elix<span class="op">$</span>Obesity</a>
<a class="sourceLine" id="cb2-38" title="38"><span class="co">#&gt; [1] &quot;E66&quot;   &quot;E660&quot;  &quot;E6601&quot; &quot;E6609&quot; &quot;E661&quot;  &quot;E662&quot;  &quot;E663&quot;  &quot;E668&quot;  &quot;E669&quot;</span></a>
<a class="sourceLine" id="cb2-39" title="39">icd<span class="op">::</span><span class="kw">icd10_comorbid_quan_elix</span>(</a>
<a class="sourceLine" id="cb2-40" title="40">  obesity,</a>
<a class="sourceLine" id="cb2-41" title="41">  <span class="dt">return_df =</span> <span class="ot">TRUE</span>)[<span class="st">&quot;Obesity&quot;</span>]</a>
<a class="sourceLine" id="cb2-42" title="42"><span class="co">#&gt;   Obesity</span></a>
<a class="sourceLine" id="cb2-43" title="43"><span class="co">#&gt; 1    TRUE</span></a>
<a class="sourceLine" id="cb2-44" title="44"><span class="co">#&gt; 2    TRUE</span></a>
<a class="sourceLine" id="cb2-45" title="45"><span class="co">#&gt; 3    TRUE</span></a>
<a class="sourceLine" id="cb2-46" title="46"><span class="co">#&gt; 4    TRUE</span></a></code></pre></div>
<div id="maps-with-ranges-of-codes" class="section level2">
<h2>Maps with ranges of codes</h2>
<p>Sometimes there are a large number of ICD codes, and they can be defined more succinctly with ranges, then by specifying every single code. In addition, as new codes are added to ICD-10-CM, (especially ICD-10-CM – it moves much faster than ICD-10 from the WHO) having specific hard-coded ICD-10 codes will miss closely related codes in the future. Using the ranges functions from <code>icd</code> helps with both these problems.</p>
<p>Again, using a <a href="https://stackoverflow.com/questions/54245282/how-to-compare-icd-10-character-string-or-search-whether-a-diagnosis-fall-into-t/54277842#54277842">Stackoverflow question</a>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">library</span>(icd)</a>
<a class="sourceLine" id="cb3-2" title="2">diagnoses &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;C349&quot;</span>, <span class="st">&quot;A219&quot;</span>, <span class="st">&quot;B003&quot;</span>, <span class="st">&quot;C509&quot;</span>, <span class="st">&quot;B700&quot;</span>, <span class="st">&quot;A090&quot;</span>)</a>
<a class="sourceLine" id="cb3-3" title="3">one_pt &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">id =</span> <span class="kw">rep</span>(<span class="st">&quot;patient1&quot;</span>, <span class="kw">length</span>(diagnoses)),</a>
<a class="sourceLine" id="cb3-4" title="4">                     diagnoses)</a>
<a class="sourceLine" id="cb3-5" title="5">dif_pt &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">id =</span> <span class="kw">paste0</span>(<span class="st">&quot;patient&quot;</span>, <span class="kw">seq_along</span>(diagnoses)),</a>
<a class="sourceLine" id="cb3-6" title="6">                     diagnoses)</a>
<a class="sourceLine" id="cb3-7" title="7">my_map &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">c01to17 =</span> <span class="kw">expand_range</span>(<span class="st">&quot;C01&quot;</span>, <span class="st">&quot;C17&quot;</span>),</a>
<a class="sourceLine" id="cb3-8" title="8">               <span class="dt">a74to75 =</span> <span class="kw">expand_range</span>(<span class="st">&quot;A748&quot;</span>, <span class="st">&quot;A759&quot;</span>),</a>
<a class="sourceLine" id="cb3-9" title="9">               <span class="dt">b00to33 =</span> <span class="kw">expand_range</span>(<span class="st">&quot;B001&quot;</span>, <span class="st">&quot;B331&quot;</span>),</a>
<a class="sourceLine" id="cb3-10" title="10">               <span class="dt">b69to72 =</span> <span class="kw">expand_range</span>(<span class="st">&quot;B69&quot;</span>, <span class="st">&quot;B72&quot;</span>),</a>
<a class="sourceLine" id="cb3-11" title="11">               <span class="dt">c00to94 =</span> <span class="kw">expand_range</span>(<span class="st">&quot;C000&quot;</span>, <span class="st">&quot;C942&quot;</span>))</a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co"># optionally use as.comorbidity_map which ensures it is valid, and let&#39;s it</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co"># print more pleasantly</span></a>
<a class="sourceLine" id="cb3-14" title="14">my_map &lt;-<span class="st"> </span><span class="kw">as.comorbidity_map</span>(my_map)</a>
<a class="sourceLine" id="cb3-15" title="15"><span class="kw">print</span>(my_map)</a>
<a class="sourceLine" id="cb3-16" title="16"><span class="co">#&gt; Showing first 7 comorbidities, and first 7 of each.</span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="co">#&gt; $c01to17</span></a>
<a class="sourceLine" id="cb3-18" title="18"><span class="co">#&gt; [1] &quot;C01&quot;  &quot;C02&quot;  &quot;C020&quot; &quot;C021&quot; &quot;C022&quot; &quot;C023&quot; &quot;C024&quot;</span></a>
<a class="sourceLine" id="cb3-19" title="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-20" title="20"><span class="co">#&gt; $a74to75</span></a>
<a class="sourceLine" id="cb3-21" title="21"><span class="co">#&gt; [1] &quot;A748&quot;  &quot;A7481&quot; &quot;A7489&quot; &quot;A749&quot;  &quot;A75&quot;   &quot;A750&quot;  &quot;A751&quot; </span></a>
<a class="sourceLine" id="cb3-22" title="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-23" title="23"><span class="co">#&gt; $b00to33</span></a>
<a class="sourceLine" id="cb3-24" title="24"><span class="co">#&gt; [1] &quot;B001&quot;  &quot;B002&quot;  &quot;B003&quot;  &quot;B004&quot;  &quot;B005&quot;  &quot;B0050&quot; &quot;B0051&quot;</span></a>
<a class="sourceLine" id="cb3-25" title="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-26" title="26"><span class="co">#&gt; $b69to72</span></a>
<a class="sourceLine" id="cb3-27" title="27"><span class="co">#&gt; [1] &quot;B69&quot;   &quot;B690&quot;  &quot;B691&quot;  &quot;B698&quot;  &quot;B6981&quot; &quot;B6989&quot; &quot;B699&quot; </span></a>
<a class="sourceLine" id="cb3-28" title="28"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-29" title="29"><span class="co">#&gt; $c00to94</span></a>
<a class="sourceLine" id="cb3-30" title="30"><span class="co">#&gt; [1] &quot;C000&quot; &quot;C001&quot; &quot;C002&quot; &quot;C003&quot; &quot;C004&quot; &quot;C005&quot; &quot;C006&quot;</span></a>
<a class="sourceLine" id="cb3-31" title="31">icd<span class="op">::</span><span class="kw">comorbid</span>(one_pt, <span class="dt">map =</span> my_map)</a>
<a class="sourceLine" id="cb3-32" title="32"><span class="co">#&gt;          c01to17 a74to75 b00to33 b69to72 c00to94</span></a>
<a class="sourceLine" id="cb3-33" title="33"><span class="co">#&gt; patient1   FALSE   FALSE    TRUE    TRUE    TRUE</span></a>
<a class="sourceLine" id="cb3-34" title="34">(six_pts_cmb &lt;-<span class="st"> </span>icd<span class="op">::</span><span class="kw">comorbid</span>(dif_pt, <span class="dt">map =</span> my_map))</a>
<a class="sourceLine" id="cb3-35" title="35"><span class="co">#&gt;          c01to17 a74to75 b00to33 b69to72 c00to94</span></a>
<a class="sourceLine" id="cb3-36" title="36"><span class="co">#&gt; patient1   FALSE   FALSE   FALSE   FALSE    TRUE</span></a>
<a class="sourceLine" id="cb3-37" title="37"><span class="co">#&gt; patient2   FALSE   FALSE   FALSE   FALSE   FALSE</span></a>
<a class="sourceLine" id="cb3-38" title="38"><span class="co">#&gt; patient3   FALSE   FALSE    TRUE   FALSE   FALSE</span></a>
<a class="sourceLine" id="cb3-39" title="39"><span class="co">#&gt; patient4   FALSE   FALSE   FALSE   FALSE    TRUE</span></a>
<a class="sourceLine" id="cb3-40" title="40"><span class="co">#&gt; patient5   FALSE   FALSE   FALSE    TRUE   FALSE</span></a>
<a class="sourceLine" id="cb3-41" title="41"><span class="co">#&gt; patient6   FALSE   FALSE   FALSE   FALSE   FALSE</span></a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
